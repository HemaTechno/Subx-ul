<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Subx</title>

  <!-- Linkvertise -->
  <script src="https://publisher.linkvertise.com/cdn/linkvertise.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      font-family: Inter, sans-serif;
      background: #0a0a14;
      color: #fff;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .container {
      max-width: 450px;
      width: 100%;
    }
    .card {
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 15px;
    }
    .task {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .task button {
      background: #6a4cff;
      border: none;
      color: #fff;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
    }
    #unlockBtn {
      display: none;
      margin-top: 20px;
      width: 100%;
      padding: 14px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background: #6a4cff;
      color: #fff;
      cursor: pointer;
    }
    #unlockBtn:disabled {
      opacity: 0.6;
    }
  </style>
</head>

<body>
<div class="container">
  <div class="card">
    <h2 id="linkTitle">Premium Content</h2>
    <p id="linkDesc">Complete all tasks to unlock</p>

    <div id="taskList"></div>

    <button id="unlockBtn">Unlock Content ðŸ”“</button>
    <div id="countView">0 Premium Unlocks</div>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getFirestore, doc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBoPJbx5v6EkOqxOJkbhzHqIJdAByh79Rg",
    authDomain: "hhhhhh-d4fb8.firebaseapp.com",
    projectId: "hhhhhh-d4fb8"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const taskList = document.getElementById("taskList");
  const unlockBtn = document.getElementById("unlockBtn");
  const countView = document.getElementById("countView");

  let tasks = [
    { title: "Subscribe YouTube", link: "https://youtube.com/@hema_tech1", done: false },
    { title: "Watch Video", link: "https://example.com", done: false },
    { title: "Join Telegram", link: "https://t.me/example", done: false }
  ];

  let unlockCount = 0;
  let canClickUnlock = true;

  function renderTasks() {
    taskList.innerHTML = "";
    const completed = tasks.filter(t => t.done).length;

    tasks.forEach((task, i) => {
      if (i > completed) return;

      const div = document.createElement("div");
      div.className = "task";
      div.innerHTML = `
        <span>${task.title}</span>
        ${task.done ? "âœ…" : `<button onclick="startTask(${i})">Start</button>`}
      `;
      taskList.appendChild(div);
    });

    if (completed === tasks.length) {
      unlockBtn.style.display = "block";
    }
  }

  window.startTask = function(i) {
    tasks[i].done = true;
    window.open(tasks[i].link, "_blank");
    setTimeout(renderTasks, 5000);
  };

  function handleUnlockClick() {
    if (!canClickUnlock) return;

    const allDone = tasks.every(t => t.done);
    if (!allDone) {
      alert("Complete all tasks first!");
      return;
    }

    canClickUnlock = false;
    unlockBtn.disabled = true;
    unlockBtn.textContent = "â³ Redirecting...";

    // ðŸ”¥ Linkvertise ÙŠØ¹Ù…Ù„ Ù‡Ù†Ø§ ÙÙ‚Ø·
    linkvertise(1264869, {
      whitelist: [],
      blacklist: []
    });

    unlockCount++;
    countView.textContent = unlockCount + " Premium Unlocks";

    setTimeout(() => {
      canClickUnlock = true;
      unlockBtn.disabled = false;
      unlockBtn.textContent = "Unlock Content ðŸ”“";
    }, 10000);
  }

  unlockBtn.addEventListener("click", handleUnlockClick);

  renderTasks();
</script>
</body>
</html>
